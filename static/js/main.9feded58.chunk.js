(this["webpackJsonpfinal-weather-prj"]=this["webpackJsonpfinal-weather-prj"]||[]).push([[0],{16:function(e,t,n){e.exports=n(31)},21:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(7),i=n.n(r),o=(n(21),n(2)),l=n.n(o),s=n(13),u=n(6),m=n(14),h=n(5),d=n(3),f=n(4),p=function(e){var t=e.toggleShowSettingsOnClick,n=e.toggleChangeTimeFormatOnClick,a=e.toggleChangeDegreesFormatOnClick,r=e.toggleAutoUpdateWeatherWhenChangingCityOnClick,i=e.autoUpdateWeather,o=e.show24hTime,l=e.showFahrenheit;return c.a.createElement("div",{className:"black-cover"},c.a.createElement("div",{className:"settings-cont"},c.a.createElement("div",{className:"top-block"},c.a.createElement("h2",null,"Settings"),c.a.createElement(d.a,{icon:f.h,onClick:t,className:"close-btn",size:"3x"})),c.a.createElement("div",{className:"settings-block"},c.a.createElement("div",{className:"check-box-container"},c.a.createElement("h4",null,"Temperature:"),c.a.createElement("div",{className:"temp-change"},c.a.createElement("h5",null,"\xb0C"),c.a.createElement("input",{checked:l,className:"checkbox",type:"checkbox",onChange:a}),c.a.createElement("h5",null,"\xb0F"))),c.a.createElement("div",{className:"check-box-container"},c.a.createElement("h4",null,"Auto Update Weather, when switching the cities:"),c.a.createElement("div",{className:"auto-update"},c.a.createElement("h5",null,"Off"),c.a.createElement("input",{checked:i,className:"checkbox",type:"checkbox",onChange:r}),c.a.createElement("h5",null,"On"))),c.a.createElement("div",{className:"check-box-container"},c.a.createElement("h4",null,"Time format: "),c.a.createElement("div",{className:"time-format"},c.a.createElement("h5",null,"12h"),c.a.createElement("input",{checked:o,className:"checkbox",type:"checkbox",onChange:n}),c.a.createElement("h5",null,"24h"))))))},g=function(e){var t=e.list,n=e.submit;return c.a.createElement("div",{className:"listOfCities-box"},c.a.createElement("ul",{className:"city-list"},t.map((function(e){return c.a.createElement("li",{key:e.id,onClick:function(t){return n(e,t)}},c.a.createElement("h4",null,e.city)," ",c.a.createElement("h6",null,e.country),c.a.createElement("hr",null))}))))},E="https://wft-geo-db.p.rapidapi.com/v1/geo/cities?namePrefix=",C="f94ea70c7amsh93941eb1918691ep15f1ecjsn783eefb2ee1f",b=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(E).concat(t,"&sort=-population"),{method:"GET",headers:{"x-rapidapi-host":"wft-geo-db.p.rapidapi.com","x-rapidapi-key":"".concat(C)}}).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e){var t=e.handleAddCityWeatherAndDateOnClick,n=Object(a.useState)(""),r=Object(h.a)(n,2),i=r[0],o=r[1],l=Object(a.useState)(null),s=Object(h.a)(l,2),u=s[0],m=s[1];return Object(a.useEffect)((function(){var e=setTimeout((function(){i.length>3&&b(i).then((function(e){m(e.data)}))}),500);return function(){clearTimeout(e)}}),[i]),c.a.createElement("div",{className:"input-box"},c.a.createElement("input",{value:i,placeholder:"e.g. Moscow",onChange:function(e){o(e.target.value)}}),null!==u&&c.a.createElement(g,{list:u,submit:function(e,n){n.preventDefault();var a={city:e.city,country:e.countryCode,lat:e.latitude,long:e.longitude};t(a),o(""),m(null)}}))},w=(n(28),n(33)),O=function(e){var t=e.handleAddCityWeatherAndDateOnClick,n=e.toggleChangeTimeFormatOnClick,r=e.toggleChangeDegreesFormatOnClick,i=e.toggleAutoUpdateWeatherWhenChangingCityOnClick,o=e.autoUpdateWeather,l=e.show24hTime,s=e.showFahrenheit,u=Object(a.useState)(!1),m=Object(h.a)(u,2),g=m[0],E=m[1],C=Object(a.useState)(!1),b=Object(h.a)(C,2),O=b[0],y=b[1],k=function(){y(!O)};return c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"header-container"},c.a.createElement(d.a,{className:"add-btn",icon:f.f,size:"3x",onClick:function(){E(!g)}}),c.a.createElement(w.a,{in:g,timeout:1e3,mountOnEnter:!0,unmountOnExit:!0,classNames:"search-bar"},c.a.createElement(v,{handleAddCityWeatherAndDateOnClick:t})),c.a.createElement(d.a,{className:"settings-btn",icon:f.d,size:"3x",onClick:k})),c.a.createElement(w.a,{in:O,timeout:400,mountOnEnter:!0,unmountOnExit:!0,classNames:"settings-animation"},c.a.createElement(p,{toggleAutoUpdateWeatherWhenChangingCityOnClick:i,toggleChangeTimeFormatOnClick:n,toggleChangeDegreesFormatOnClick:r,autoUpdateWeather:o,show24hTime:l,showFahrenheit:s,toggleShowSettingsOnClick:k})))},y=(n(29),"https://api.opencagedata.com/geocode/v1/json?"),k="57362432e5a046ec9f4701c1cc13e47d",N=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(y,"q=").concat(t.lat,"+").concat(t.long,"&language=en&key=").concat(k)).then((function(e){return e.json()})).then((function(e){return{lat:t.lat,long:t.long,city:e.results[0].components.city,country:e.results[0].components.country_code}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j="21de0ba639198264b5c2844b14971f13",x="https://api.openweathermap.org/data/2.5/",T=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"weather?q=").concat(t.city,",").concat(t.country,"&appid=").concat(j)).then((function(e){return e.json()})).then((function(e){return{temp:e.main.temp,description:e.weather[0]}})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(e){return new Date(1e3*e).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},A=function(e){var t,n=e.currentCityToShow,a=e.weatherInfo,r=e.showFahrenheit,i=e.show24hTime,o=a[n],l=o.coords.country.toUpperCase(),s=o.weather.description.description,u=o.weather.description.icon,m="http://openweathermap.org/img/wn/".concat(u,"@2x.png"),h=Math.floor(o.weather.temp-273),d="\xb0C",f=o.timeAndDate.time12;return r&&(h=Math.floor(h/5*9+32),d="\xb0F"),i&&(f=o.timeAndDate.time24),void 0!==o.timeAndDate.date&&(t=S(o.timeAndDate.date)),c.a.createElement("div",{className:"full-info"},c.a.createElement("div",{className:"location"},n,", ",l),c.a.createElement("div",{className:"date"},t),c.a.createElement("p",null,"Last update time: ",f," (local)"),c.a.createElement("div",{className:"weather-condition"},c.a.createElement("div",{className:"temp"},h,d),c.a.createElement("div",{className:"weather-description"},s),c.a.createElement("div",{className:"more-info"},c.a.createElement("img",{alt:"",src:m}))))},D=(n(30),function(e){var t=e.listOfTheCities,n=e.currentCityToShow,a=["circle-dot","fas fa-circle"],r=["circle-dot","fas fa-circle","activated"];return c.a.createElement("div",{className:"dots-container"},c.a.createElement("ul",null,t.map((function(e){return c.a.createElement("li",{key:e,id:e},c.a.createElement(d.a,{className:e==n?r.join(" "):a.join(" "),icon:f.c,size:"1x"}))}))))}),F=function(e){var t=e.currentCityToShow,n=e.cityTimeAndDateInfo,a=e.weatherInfo,r=e.handleShowPreviousCityOnClick,i=e.handleShowNextCityOnClick,o=e.handleUpdateCityWeatherAndTimeOnClick,l=e.handleDeleteCityFromListOnClick,s=e.showFahrenheit,u=e.show24hTime,m=e.listOfTheCities;return c.a.createElement("div",{className:"weather-info"},c.a.createElement("div",{className:"general-info-container"},c.a.createElement(d.a,{className:"nav-btn faChevronLeft",icon:f.a,size:"4x",onClick:r}),c.a.createElement(A,{currentCityToShow:t,cityTimeAndDateInfo:n,weatherInfo:a,showFahrenheit:s,show24hTime:u}),c.a.createElement(d.a,{className:" nav-btn faChevronRight",icon:f.b,size:"4x",onClick:i})),c.a.createElement("div",{className:"deleteUpdate-container"},c.a.createElement(d.a,{className:"update-btn",icon:f.g,size:"3x",onClick:o}),c.a.createElement(D,{listOfTheCities:m,currentCityToShow:t}),c.a.createElement(d.a,{className:"delete-btn",icon:f.h,size:"4x",onClick:l})))},W=function(e){return e>"06"&&e<"11"?"morning":e>"11"&&e<"19"?"day":e>"19"&&e<"23"?"evening":"night"},U="cbbe33181e2b4c389ee8303db47d81b0",z="https://api.ipgeolocation.io/timezone?apiKey=",I=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.lat,a=t.long,e.next=3,fetch("".concat(z).concat(U,"&lat=").concat(n,"&long=").concat(a)).then((function(e){return e.json()})).then((function(e){var t=W(e.time_24);return{time24:e.time_24,time12:e.time_12,date:e.date_time_unix,dayTime:t}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){return c.a.createElement("div",{className:"no-cities-message"},c.a.createElement(d.a,{className:"warning-btn",icon:f.e,size:"4x"}),c.a.createElement("p",null,"If your app is not loading you current city weather, and can't load ANY other city by using search - please, turn off your ad-block. There is no Ads in this small application. Thank you :)"))},L=function(){var e=Object(a.useState)(null),t=Object(h.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)([]),o=Object(h.a)(i,2),d=o[0],f=o[1],p=Object(a.useState)(null),g=Object(h.a)(p,2),E=g[0],C=g[1],b=Object(a.useState)(null),v=Object(h.a)(b,2),w=v[0],y=v[1],k=Object(a.useState)(!1),j=Object(h.a)(k,2),x=j[0],S=j[1],A=Object(a.useState)(!1),D=Object(h.a)(A,2),W=D[0],U=D[1],z=Object(a.useState)(!1),L=Object(h.a)(z,2),P=L[0],M=L[1],q=d.indexOf(w);Object(a.useEffect)((function(){window.navigator.geolocation.getCurrentPosition((function(e){return r({lat:e.coords.latitude,long:e.coords.longitude})}),(function(e){return console.log(e)}))}),[]),Object(a.useEffect)((function(){n&&N(n).then((function(e){return B(e)}))}),[n]),Object(a.useEffect)((function(){W&&G()}),[w]);var J=function(e,t,n){var a=Object(m.a)({},E);return a[n.city]={weather:e,timeAndDate:t,coords:n},a},B=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t);case 2:return n=e.sent,e.next=5,I(t);case 5:a=e.sent,d.includes(t.city)||f([].concat(Object(s.a)(d),[t.city])),c=J(n,a,t),C(c),y(t.city);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B(E[w].coords);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){q===d.length-1?y(d[0]):y(d[q+1])},R=["main","default"];return null!==w&&(R=["main",E[w].timeAndDate.dayTime]),c.a.createElement("div",{className:R.join(" ")},c.a.createElement(O,{handleAddCityWeatherAndDateOnClick:B,toggleChangeTimeFormatOnClick:function(){M(!P)},toggleChangeDegreesFormatOnClick:function(){S(!x)},toggleAutoUpdateWeatherWhenChangingCityOnClick:function(){U(!W)},showFahrenheit:x,show24hTime:P,autoUpdateWeather:W}),null!==w?c.a.createElement(F,{weatherInfo:E,currentCityToShow:w,showFahrenheit:x,show24hTime:P,listOfTheCities:d,handleShowNextCityOnClick:K,handleShowPreviousCityOnClick:function(){w===d[0]?y(d[d.length-1]):y(d[q-1])},handleUpdateCityWeatherAndTimeOnClick:G,handleDeleteCityFromListOnClick:function(){var e=d.filter((function(e){return e!==w}));f(e),d.length>1?K():y(null)}}):c.a.createElement("div",{className:"warning-messages"},c.a.createElement("div",{className:"no-cities-message"},c.a.createElement("h2",null,"There is no cities to show. Try to find some")),c.a.createElement(_,null)))};var P=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(L,null))};i.a.render(c.a.createElement(P,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.9feded58.chunk.js.map